---
title: Docker and R - A Magic Combo
author: Nik Agarwal
date: '2020-10-20'
slug: [docker-and-r-a-magic-combo]
categories: []
tags: ["docker"]
draft: true
---



<p>Things to talk about:</p>
<ul>
<li>Benefits
<ul>
<li>reproducibility</li>
<li>consistent ‘experience’</li>
<li>need to think about what you want installed (not a VM)</li>
<li>disadvantages: image size; building takes time, libraries can take a while to download &amp; install</li>
</ul></li>
<li>Shoutout
<ul>
<li><a href="https://rsangole.netlify.app/post/2020/10/10/reproducible-work-in-r/">Rahul</a></li>
<li>MRAN vs. Package Manager from RStudio</li>
<li>binary vs. source</li>
</ul></li>
<li>Dockerfile
<ul>
<li><a href="https://github.com/nikdata/blognik/blob/master/docker/Dockerfile">My Dockerfile</a></li>
</ul></li>
<li>Dive into Dockerfile components
<ul>
<li>The “meta” data</li>
<li>Installing the Linux libraries</li>
<li>Installing the R libraries</li>
<li>Installing hugo</li>
</ul></li>
<li>shell commands
<ul>
<li>build, run, stop</li>
<li>how to run on Mac</li>
</ul></li>
<li>closing thoughts</li>
<li>References
<ol style="list-style-type: decimal">
<li><a href="https://github.com/rocker-org/rocker-versioned2" class="uri">https://github.com/rocker-org/rocker-versioned2</a></li>
<li><a href="https://www.garrickadenbuie.com/blog/blogdown-netlify-new-post-workflow/" class="uri">https://www.garrickadenbuie.com/blog/blogdown-netlify-new-post-workflow/</a></li>
<li><a href="https://medium.com/@skyetetra/r-docker-faster-28e13a6d241d" class="uri">https://medium.com/@skyetetra/r-docker-faster-28e13a6d241d</a></li>
<li><a href="https://github.com/eddelbuettel/littler/blob/master/inst/examples/install2.r" class="uri">https://github.com/eddelbuettel/littler/blob/master/inst/examples/install2.r</a></li>
<li><a href="https://packagemanager.rstudio.com/client/#/repos/1/overview" class="uri">https://packagemanager.rstudio.com/client/#/repos/1/overview</a></li>
</ol></li>
</ul>
<div id="perks" class="section level1">
<h1>Perks</h1>
<p>My good friend (and former classmate) Rahul Sangole has a great <a href="https://rsangole.netlify.app/post/2020/10/10/reproducible-work-in-r/">blog post</a> about setting up Docker &amp; R and why he did it. It really boils down to a couple different things: reproducibility and having a consistent development environment. As a data scientist, I cannot stress the importance of reproducibility. If you can’t reproduce your results/analyses (nor can anyone else), then suffice to say, that’s a bad thing!</p>
</div>
<div id="the-challenge" class="section level1">
<h1>The Challenge</h1>
<p>Reproducibility in a data science project is key to having a defendable analysis and defendable models. Those are key elements to ensure your analyses and models are interpreted exactly how you want them to be interpreted. One of the challenges when developing analyses in R is the limited ability to have ‘frozen’ package versions. When you update packages in R, they update and you almost lose the older versions. This may not always be what you want as your project work may break. Rahul does a great job also pointing out how other folks on his team don’t manage packages at the same cadence as other team members. One obvious solution is to have a <strong>a reproducible and consistent development environment</strong> that the whole team can work off of. This ensures that everyone is on the same ‘page’. Plus, it ensures that if new packages are used, the whole team can collectively agree or disagree on its usage.</p>
</div>
<div id="the-savior" class="section level1">
<h1>The Savior</h1>
<p>Docker is a great solution to this problem. Best of all, it simply consists of a small text file (called <em>Dockerfile</em> without any extension). In this file, you can define any and all steps you want done. A Docker file is then compiled into an image and a running image is found within a container. What makes Docker really cool is that it has all the software you need and expect every single time you run it. It won’t add or delete anything without your explicit instruction.</p>
<p>Docker is NOT a virtual machine (VM). It doesn’t necessairly have a complete OS with independent memory managment from your computer. Whenever a docker container shuts down, if the work wasn’t saved in a perpetual memory location, your work is lost. And with Docker, you only install what you need for your project work - you don’t want to recreate your own machine.</p>
</div>
<div id="the-docker-pain" class="section level1">
<h1>The Docker Pain</h1>
<p>Docker is a great solution, however, it does have its major drawbacks. It</p>
</div>
