<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>PlaidML on a Mac with R | nikhil agarwal</title>
<meta name=keywords content="deep learning">
<meta name=description content="Deep Learning with R on macOS using PlaidML">
<meta name=author content="
">
<link rel=canonical href=https://nik.netlify.app/post/2020-10-22-plaidml-on-a-mac-with-r/>
<link href=/assets/css/stylesheet.min.d08f6c302eba3eaecd589684c093cecdfe7dfb8745a207401bd0583d3bb31837.css integrity="sha256-0I9sMC66Pq7NWJaEwJPOzf59+4dFogdAG9BYPTuzGDc=" rel="preload stylesheet" as=style>
<link rel=icon href=https://nik.netlify.app/img/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://nik.netlify.app/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://nik.netlify.app/favicon-32x32.png>
<link rel=apple-touch-icon href=https://nik.netlify.app/apple-touch-icon.png>
<link rel=mask-icon href=https://nik.netlify.app/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<meta property="og:title" content="PlaidML on a Mac with R">
<meta property="og:description" content="Deep Learning with R on macOS using PlaidML">
<meta property="og:type" content="article">
<meta property="og:url" content="https://nik.netlify.app/post/2020-10-22-plaidml-on-a-mac-with-r/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2020-10-22T00:00:00+00:00">
<meta property="article:modified_time" content="2020-10-22T00:00:00+00:00"><meta property="og:site_name" content="Nik">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="PlaidML on a Mac with R">
<meta name=twitter:description content="Deep Learning with R on macOS using PlaidML">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nik.netlify.app/post/"},{"@type":"ListItem","position":3,"name":"PlaidML on a Mac with R","item":"https://nik.netlify.app/post/2020-10-22-plaidml-on-a-mac-with-r/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PlaidML on a Mac with R","name":"PlaidML on a Mac with R","description":"Deep Learning with R on macOS using PlaidML","keywords":["deep learning"],"articleBody":"  Let me start from the beginning Prior to the whole Covid-19 pandemic, I was actively looking for a new opportunity. One of the first interviews I had (it went terrible from both sides), I was told that I was “classically” trained data scientist. When I asked the interviewer what he meant by that, his explanation was fairly clear: “You don’t have experience with Deep Learning and your experiences thus far are only with simple machine learning techniques.” During the follow-up, I surmised that the organization didn’t really care for my background - they just wanted someone who can come in, write code for deep learning, and move on. Not really a company I wanted to work for. However, when I thought more about that interview, I was quite upset with myself.\nWhen I was looking through job postings, many of them asked for experience with TensorFlow and other deep learning methods. I was dismayed by two things:\nI didn’t know deep learning as it wasn’t used much at my then current employer How these companies knew that deep learning was the only solution to whatever problems they were trying to solve  In hindsight (which is always 20/20), terms like ‘TensorFlow’ and ‘deep learning’ are fashionable and ‘hot’. However, I realized early on that I needed to learn and apply deep learning. I needed to know how the algorithms work and why people think they’re magic.\nMy good friend Rahul helped me to understand how he approached/taught himself deep learning. That’s how I found out that I ‘needed’1 a video card and Rahul had an nVidia! To my dismay, I knew that my MacBook Pro was incompatible with nVidia GPUs. And I also wasn’t aware of solutions like Google CoLab that enable you to use GPUs for free (granted it’s limited and I dislike the notebook format very much - but I digress). From Apple’s own support doc, I gathered that I could only use and AMD GPU. But, AMD GPUs aren’t on the compatibility list for TensorFlow. So what now?\nWhile browsing my Twitter feed and Reddit, I came across a project called PlaidML. And PlaidML promised to play nice with AMD GPUs!\nMy lovely wife was super supportive of my intent on finding a new opportunity and when we talked about why I was struggling2, she made a mental note (I think) to herself to get my what I needed to succeed. For my birthday, she got me an external GPU enclosure, an AMD GPU, and the book Deep Learning with R. So now I had everything, I thought.\n Why are tutorials hard to find? While the book is really good, there are two things that I felt were missing:\nsimple tutorials on simple datasets limited tutorials on using functional vs. sequential API  What I mean by simple tutorial is a tutorial that walks me through simple datasets3 where we know “classical” machine learning models would work just fine. My own searches showed that many tutorials on deep learning were focused on image recognition/classification and text analytics. While those are great use cases, they weren’t the best for me. What I was really looking for was a tutorial that goes step by step in simple and easy to follow steps. Alas, I couldn’t find a tutorial that was using PlaidML and an easy dataset.\nGuess I have to make my own.\n My Own Tutorial If you’re still reading, thank you! I created my own tutorial using the Hotels dataset (see footnotes below) and I use both the PlaidML framework and the functional API.\n To Summarize, Here’s What I Learned  PlaidML is an alternative framework to TensorFlow. They have many of the same methodologies, but it is not TensorFlow. As such, you cannot expect the same exact results. However, you may expect comparable performance.\n {keras} is basically a wrapper around TensorFlow. Keras is basically “converting” the Keras syntax into the equivalent syntax for TensorFlow.\n {keras} for R also enables you to use PlaidML as the backend and does the conversions on the fly.\n Deep learning is NOT a magic bullet. Rather, it’s another tool that helps. My approach has been to start with “classical” methods such as random forest, linear regression, etc. and then move onto increasingly complex models. The best model is NOT always the one with the best accuracy or minimal error. You have to balance the business objectives and the end goal.\n Functional vs Sequential API for TensorFlow (or PlaidML) is not a simple answer. There are pros and cons to both approaches. Often, the sequential approach is easier to work with initially - as long as you don’t have to reuse a variety of intermediate steps.\n Whenever I see a tutorial for TensorFlow, I just substitute PlaidML and I can get it to work just fine.\n  In closing, I ended my job hunt with three offers. It was a great feeling and what I found absolutely rewarding was the fact that all three organizations agreed with my perspective that deep learning isn’t always the answer. Best of all, I can use my MacBook Pro with an AMD GPU and still expect comparable results and a rewarding experience.\n  At the time, I was convinced that deep learning could only be done with a GPU↩︎\n Job hunting sucks. It’s draining mentally and it’s easy to lose hope!↩︎\n Here’s an example of a simple dataset↩︎\n   ","wordCount":"896","inLanguage":"en","datePublished":"2020-10-22T00:00:00Z","dateModified":"2020-10-22T00:00:00Z","author":{"@type":"Person","name":"Nik Agarwal"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nik.netlify.app/post/2020-10-22-plaidml-on-a-mac-with-r/"},"publisher":{"@type":"Organization","name":"nikhil agarwal","logo":{"@type":"ImageObject","url":"https://nik.netlify.app/img/favicon.ico"}}}</script>
</head>
<body class=dark id=top>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://nik.netlify.app accesskey=h title="{nik} (Alt + H)">{nik}</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://nik.netlify.app/post/ title=posts>
<span>posts</span>
</a>
</li>
<li>
<a href=https://nik.netlify.app/about/ title=about>
<span>about</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
PlaidML on a Mac with R
</h1>
<div class=post-meta>
22 October 2020&nbsp;·
5 min
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<div class=details>Table of Contents</div>
</summary>
<div class=inner><ul>
<li>
<a href=# aria-label="Let me start from the beginning">Let me start from the beginning</a></li>
<li>
<a href=# aria-label="Why are tutorials hard to find?">Why are tutorials hard to find?</a></li>
<li>
<a href=# aria-label="My Own Tutorial">My Own Tutorial</a></li>
<li>
<a href=# aria-label="To Summarize, Here’s What I Learned">To Summarize, Here’s What I Learned</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content>
<script src=https://nik.netlify.app/post/2020-10-22-plaidml-on-a-mac-with-r/index_files/header-attrs/header-attrs.js></script>
<div id=let-me-start-from-the-beginning class="section level1">
<h1>Let me start from the beginning</h1>
<p>Prior to the whole Covid-19 pandemic, I was actively looking for a new opportunity. One of the first interviews I had (it went terrible from both sides), I was told that I was “classically” trained data scientist. When I asked the interviewer what he meant by that, his explanation was fairly clear: “You don’t have experience with Deep Learning and your experiences thus far are only with simple machine learning techniques.” During the follow-up, I surmised that the organization didn’t really care for my background - they just wanted someone who can come in, write code for deep learning, and move on. Not really a company I wanted to work for. However, when I thought more about that interview, I was quite upset with myself.</p>
<p>When I was looking through job postings, many of them asked for experience with TensorFlow and other deep learning methods. I was dismayed by two things:</p>
<ol style=list-style-type:decimal>
<li>I didn’t know deep learning as it wasn’t used much at my then current employer</li>
<li>How these companies knew that deep learning was the only solution to whatever problems they were trying to solve</li>
</ol>
<p>In hindsight (which is <em>always</em> 20/20), terms like ‘TensorFlow’ and ‘deep learning’ are fashionable and ‘hot’. However, I realized early on that I needed to learn and apply deep learning. I needed to know how the algorithms work and why people think they’re <em>magic</em>.</p>
<p>My good friend <a href=https://rsangole.netlify.app>Rahul</a> helped me to understand how he approached/taught himself deep learning. That’s how I found out that I ‘needed’<a href=#fn1 class=footnote-ref id=fnref1><sup>1</sup></a> a video card and Rahul had an nVidia! To my dismay, I knew that my MacBook Pro was incompatible with nVidia GPUs. And I also wasn’t aware of solutions like Google CoLab that enable you to use GPUs for free (granted it’s limited and I dislike the notebook format very much - but I digress). From <a href=https://support.apple.com/en-us/HT208544>Apple’s own support doc</a>, I gathered that I could only use and AMD GPU. But, AMD GPUs aren’t on the <a href=https://www.tensorflow.org/install/gpu>compatibility list</a> for TensorFlow. So what now?</p>
<p>While browsing my Twitter feed and Reddit, I came across a project called <a href=https://github.com/plaidml/plaidml>PlaidML</a>. And PlaidML promised to play nice with AMD GPUs!</p>
<p>My lovely wife was super supportive of my intent on finding a new opportunity and when we talked about why I was struggling<a href=#fn2 class=footnote-ref id=fnref2><sup>2</sup></a>, she made a mental note (I think) to herself to get my what I needed to succeed. For my birthday, she got me an external GPU enclosure, an AMD GPU, and the book <a href=https://www.amazon.com/Deep-Learning-R-Francois-Chollet/dp/161729554X>Deep Learning with R</a>. So now I had everything, I thought.</p>
</div>
<div id=why-are-tutorials-hard-to-find class="section level1">
<h1>Why are tutorials hard to find?</h1>
<p>While the book is really good, there are two things that I felt were missing:</p>
<ol style=list-style-type:decimal>
<li>simple tutorials on simple datasets</li>
<li>limited tutorials on using functional vs. sequential API</li>
</ol>
<p>What I mean by simple tutorial is a tutorial that walks me through simple datasets<a href=#fn3 class=footnote-ref id=fnref3><sup>3</sup></a> where we know “classical” machine learning models would work just fine. My own searches showed that many tutorials on deep learning were focused on image recognition/classification and text analytics. While those are great use cases, they weren’t the best for me. What I was really looking for was a tutorial that goes step by step in simple and easy to follow steps. Alas, I couldn’t find a tutorial that was using PlaidML and an easy dataset.</p>
<p>Guess I have to make my own.</p>
</div>
<div id=my-own-tutorial class="section level1">
<h1>My Own Tutorial</h1>
<p>If you’re still reading, thank you! I created my own <a href=https://github.com/nikdata/hotel-modeling>tutorial</a> using the Hotels dataset (see footnotes below) and I use both the PlaidML framework and the functional API.</p>
</div>
<div id=to-summarize-heres-what-i-learned class="section level1">
<h1>To Summarize, Here’s What I Learned</h1>
<ul>
<li><p>PlaidML is an alternative framework to TensorFlow. They have many of the same methodologies, but it is not TensorFlow. As such, you cannot expect the same exact results. However, you may expect comparable performance.</p></li>
<li><p>{keras} is basically a wrapper around TensorFlow. Keras is basically “converting” the Keras syntax into the equivalent syntax for TensorFlow.</p></li>
<li><p>{keras} for R also enables you to use PlaidML as the backend and does the conversions on the fly.</p></li>
<li><p>Deep learning is NOT a <em>magic</em> bullet. Rather, it’s another tool that helps. My approach has been to start with “classical” methods such as random forest, linear regression, etc. and then move onto increasingly complex models. The best model is NOT always the one with the best accuracy or minimal error. You have to balance the business objectives and the end goal.</p></li>
<li><p>Functional vs Sequential API for TensorFlow (or PlaidML) is not a simple answer. There are pros and cons to both approaches. Often, the sequential approach is easier to work with initially - as long as you don’t have to reuse a variety of intermediate steps.</p></li>
<li><p>Whenever I see a tutorial for TensorFlow, I just substitute PlaidML and I can get it to work just fine.</p></li>
</ul>
<p>In closing, I ended my job hunt with three offers. It was a great feeling and what I found absolutely rewarding was the fact that all three organizations agreed with my perspective that deep learning isn’t always the answer. Best of all, I can use my MacBook Pro with an AMD GPU and still expect comparable results and a rewarding experience.</p>
</div>
<div class=footnotes>
<hr>
<ol>
<li id=fn1><p>At the time, I was convinced that deep learning could only be done with a GPU<a href=#fnref1 class=footnote-back>↩︎</a></p></li>
<li id=fn2><p>Job hunting sucks. It’s draining mentally and it’s easy to lose hope!<a href=#fnref2 class=footnote-back>↩︎</a></p></li>
<li id=fn3><p>Here’s an <a href=https://github.com/rfordatascience/tidytuesday/tree/master/data/2020/2020-02-11>example</a> of a simple dataset<a href=#fnref3 class=footnote-back>↩︎</a></p></li>
</ol>
</div>
</div>
<footer class=post-footer>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://nik.netlify.app>nikhil agarwal</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
</body>
</html>